%scanner ../Scanner/Scanner.h
%token-path ../Scanner/tokens.h

%token VAR
%token NR
%left '+'
%left '*'
%right '-'
%%
expr:
  NR
|
  VAR
|
  '-' expr
|
  expr '+' expr
|
  expr '*' expr
|
                                      // An expression can now be something
                                      // that is indexed
  indexedExpr
;

indexedExpr:
  indexable indexingList
;
                          // We can modify to remove indexable: NR; in the
                          // future if we wish to disallow things like 3[4].
                          // Note: If we wish to index the result of an
                          // expression, an alternative to the below would be:
                          // indexable: expr and making the oneIndex rule
                          // have the highest precedence that is right
                          // associative
indexable:
  VAR
|
  NR
;
                          // One or more indexings, to be applied to an
                          // indexable.
indexingList:
  oneIndex
|
  indexingList oneIndex
;
                          // A single indexing
oneIndex:
  '[' index ']'
;
                          // What we can index by. If (in the future) we wish to
                          // index by the result of an expression, an
                          // alternative to the rule below would be:
                          // index: expr;
index:
  VAR
|
  NR
;